{{ define "main" }}
<div class="text-center mb-12 animate-in">
    <h1 class="text-5xl font-bold mb-4 text-center bg-gradient-to-r from-[#a855f7] to-[#ec4899] bg-clip-text text-transparent">
        Latest Posts
    </h1>
    <p class="text-gray-400 text-lg">{{ .Site.Params.description }}</p>
</div>


<!-- Top Banner Ad -->
{{ partial "ad-banner.html" . }}

<!-- Posts Grid -->
<div class="posts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
    {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts") }}
    {{ range $index, $post := $paginator.Pages }}
        {{ partial "post-card.html" $post }}
        
        <!-- Insert ad after every 6 posts -->
        {{ if and (gt $index 0) (eq (mod (add $index 1) 6) 0) }}
        <div class="col-span-full">
            {{ partial "ad-banner.html" $ }}
        </div>
        {{ end }}
    {{ end }}
    
    {{ if eq (len $paginator.Pages) 0 }}
    <div class="col-span-full text-center py-12">
        <p class="text-gray-400 text-lg">No posts found. Start creating your first post!</p>
    </div>
    {{ end }}
</div>

<!-- Pagination -->
{{ if gt $paginator.TotalPages 1 }}
    {{ partial "pagination.html" $paginator }}
{{ end }}
{{ end }}